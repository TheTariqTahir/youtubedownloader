
Main:

<Main@Screen>

    MDBoxLayout:
        orientation: 'vertical'
        md_bg_color:app.theme_cls.bg_normal
        padding: ('20dp', '20dp', '20dp', '20dp')
        spacing: dp(20)
        
        MDCard:
            size_hint:1,None
            md_bg_color:app.theme_cls. bg_normal
            height:dp(50)
            padding: ('5dp', '5dp', '20dp', '5dp')
            MDLabel: 
                text:'YOUTUBE DOWNLOADER'
                size_hint_y:None
                pos_hint:{'center_y':.5}
                # height:dp(80)
                font_size: sp(20)   
            MDCard:
                size_hint:None,None
                size: '30dp','30dp'
                md_bg_color:.8,.2,.4,1
                pos_hint:{'center_y':.5}
                radius:dp(40)
                on_press:app.test()
                Image:
                    source:'src/profile_logo.png'

        

        MDCardElevation:
            size_hint: 1,None
            height:dp(30)
            spacing:dp(10)
            md_bg_color:app.theme_cls.bg_normal

            # ----------------   Home Button
            MDCardButton:
                id:b_home
                md_bg_color:app.theme_cls.primary_color
                # line_color:app.theme_cls.primary_dark
                size_hint_x:None
                width:dp(100)
                elevation:dp(10)
                # shadow_pos:3,-3
                radius:dp(8)
                on_press:
                    app.change_to_home(screen_manager,b_home,l_home,b_download,l_download)
                    # self.md_bg_color=app.theme_cls.primary_color
                    # l_home.color=[1]*4

                    # b_download.md_bg_color=app.theme_cls.bg_normal
                    # l_download.color=app.theme_cls.primary_color

                    # screen_manager.transition.direction = 'right'
                    # screen_manager.current= 'Home'

                MDLabel:
                    id:l_home
                    text:'Home'
                    halign:'center'
                    font_color:'Custom'
                    color:[1]*4
                    # font_style:'Button'
                    font_size:sp(20)
                    

            # ----------------   Downloaded Button
            MDCardButton:
                id:b_download
                # line_color:app.theme_cls.primary_dark
                md_bg_color:app.theme_cls.bg_normal
                elevation:dp(10)
                size_hint_x:None
                width:dp(150)
                # shadow_pos:3,-3
                radius:dp(8)
                on_press:
                    # app.change_color(b_home)
                    app.change_to_downloading(screen_manager,b_download,l_download,b_home,l_home)
                    # self.md_bg_color=app.theme_cls.primary_color
                    # l_download.color=[1]*4
                    # b_home.md_bg_color=app.theme_cls.bg_normal
                    # l_home.color=app.theme_cls.primary_color

                    # screen_manager.transition.direction = 'left'
                    # screen_manager.current= 'Downloaded'
                MDLabel:
                    id:l_download
                    text:'Downloading'
                    halign:'center'
                    font_color:'Custom'
                    color:app.theme_cls.primary_color
                    font_size:sp(20)

       #=================== Main Screen
        # MDCardButton:
        #     id:main
        #     md_bg_color:app.theme_cls.primary_color
        #     elevation:dp(5)
        #     radius:dp(20)
        #     shadow_pos:2,-2
        #     # size_hint:None,None
        #     # height:self.parent.height
        #     # width:root.width*.9
        AnchorLayout:
            
            MDCardButton:
                id:main
                line_color:app.theme_cls.primary_color
                line_width:dp(2.5)
                md_bg_color:app.theme_cls.bg_normal
                elevation:dp(5)
                radius:dp(20)
                shadow_pos:2,-2
                size_hint:1,None
                height:self.parent.height-self.parent.height*.02
                # width:self.parent.width-self.parent.width*.03
                ScreenManager:
                    id:screen_manager

                    HomeScreen:
                    Downloaded:

                


<HomeScreen@Screen>:
    name:'Home'
    MDGridLayout:
        cols:1
        padding: ('20dp', '20dp', '20dp', '10dp')
        spacing:dp(10)
        #---------------   Text Field
        MDTextField:
            id:url
            # text:'https://www.youtube.com/watch?v=0TWIT1Q264c'
            text:''

            hint_text: "Enter Video URL"
            font_size:sp(15)
        
        #---------------   Video / Playlist
        MDBoxLayout:
            size_hint_y:None
            height:dp(30)
            spacing:dp(5)
            MDCardButton:
                id:b_video
                md_bg_color:app.theme_cls.primary_color
                size_hint_x:None
                width:dp(60)
                elevation:dp(10)
                radius:dp(5)
                on_press:
                    self.md_bg_color=app.theme_cls.primary_color
                    l_video.color=[1]*4
                    b_playlist.md_bg_color=app.theme_cls.bg_normal
                    l_playlist.color=app.theme_cls.primary_color

                MDLabel:
                    id:l_video
                    text:'Video'
                    halign:'center'
                    font_color:'Custom'
                    color:[1]*4
                    font_size:sp(12)

            # ----------------   Playlist Button
            MDCardButton:
                id:b_playlist
                md_bg_color:app.theme_cls.bg_normal
                elevation:dp(10)
                size_hint_x:None
                width:dp(80)
                elevation:dp(10)
                radius:dp(5)
                on_press:
                    
                    self.md_bg_color=app.theme_cls.primary_color
                    l_playlist.color=[1]*4
                    b_video.md_bg_color=app.theme_cls.bg_normal
                    l_video.color=app.theme_cls.primary_color

                MDLabel:
                    id:l_playlist
                    text:'Playlsit'
                    halign:'center'
                    font_color:'Custom'
                    color:app.theme_cls.primary_color
                    font_size:sp(15)


            # ----------------   Video Button
            MDCard:
                md_bg_color:app.theme_cls.bg_normal
                AnchorLayout:
                MDRectangleFlatButton:
                    text:'Get Video'
                    size_hint:None,1
                    elevation:dp(8)
                    on_press:
                        app.get_video(url.text,image,Spinner,quality_btn,download_button,file_name)
            
        # ======================== if VIdeo Selected SEction   
        MDCard:
            orientation: 'vertical' 
            md_bg_color:app.theme_cls.bg_normal
            MDGridLayout:
                cols:1
                size_hint_y:.9
                spacing:dp(15)
            # ===========================  ThunbNAil
                MDCard:
                    size_hint:1,None
                    
			
                    height:dp(130)
                    padding:dp(10)
                    AsyncImage:
                        id:image
                        source:'default_image.png'
                
                MDBoxLayout:
                    # md_bg_color:'green'
                    size_hint_y:None
                    height:dp(60)
                    orientation: 'vertical'
                    # MDLabel:
                    #     text:'Filename'
                    #     font_size:sp(15)
                    MDTextField:
                        id:file_name
                        text:''
                        hint_text:'Filename'
                        font_size:sp(12)


                MDBoxLayout:
                    size_hint_y:None
                    height:dp(30)
                    spacing:dp(5)
                    MDCardButton:
                        id:b_video_
                        md_bg_color:app.theme_cls.primary_color
                        size_hint_x:None
                        width:dp(60)
                        elevation:dp(10)
                        radius:dp(5)
                        on_press:
                            self.md_bg_color=app.theme_cls.primary_color
                            l_video_.color=[1]*4
                            b_audio.md_bg_color=app.theme_cls.bg_normal
                            l_audio.color=app.theme_cls.primary_color

                            app.select_quality(l_video_.text,quality_btn,download_button,Spinner,url.text)

                        MDLabel:
                            id:l_video_
                            text:'Video'
                            halign:'center'
                            font_color:'Custom'
                            color:[1]*4
                            font_size:sp(12)

                    # ----------------   audio Button
                    MDCardButton:
                        id:b_audio
                        md_bg_color:app.theme_cls.bg_normal
                        elevation:dp(10)
                        size_hint_x:None
                        width:dp(80)
                        elevation:dp(10)
                        radius:dp(5)
                        on_press:
                            self.md_bg_color=app.theme_cls.primary_color
                            l_audio.color=[1]*4
                            b_video_.md_bg_color=app.theme_cls.bg_normal
                            l_video_.color=app.theme_cls.primary_color
                            app.select_quality(l_audio.text,quality_btn,download_button,Spinner,url.text)

                        MDLabel:
                            id:l_audio
                            text:'Audio'
                            halign:'center'
                            font_color:'Custom'
                            color:app.theme_cls.primary_color
                            font_size:sp(15)


                MDBoxLayout:
                    size_hint:1,None
                    height:quality_btn.height
                    # md_bg_color:app.theme_cls.bg_light
                    spacing:dp(15)
                    MDRaisedButton:
                        id:quality_btn
                        pos_hint: { 'top':1 }
                        disabled: 'True'
                        text:'Select Quality'
                        on_press:
                            app.quality_popUp(self  )
                            # app.show_dialog('test','working')
                    MDSpinner:
                        id:Spinner
                        size_hint:None,None
                        pos_hint:{'center_y':.5}
                        height:dp(25)
                        width:dp(25)
                        active:False


                MDBoxLayout:
                    size_hint:1,None
                    height:quality_btn.height
                    # md_bg_color:app.theme_cls.bg_light
                    spacing:dp(15)
                    MDTextField:

                        id: path
                        text:app.path
                        font_size:sp(12)
                    MDCard:
                        size_hint:None,None
                        pos_hint:{'center_y':.5}
                        height:dp(30)
                        width:dp(30)
                        on_press:
                            
                            app.file_manager_open(path)
                        AnchorLayout:
                            MDIcon:   
                                icon:'folder'
                                font_size:sp(18)
                
                    

            MDCard:
                orientation: 'vertical'
                md_bg_color:app.theme_cls.bg_normal
                size_hint_y:.1
                
                MDFillRoundFlatIconButton:
                    id:download_button
                    # disabled: 'True'
                    text:'DOWNLOAD'
                    icon:'download'
                    size_hint:1,None
                    on_press:
                        # root.manager.current= 'Downloaded'
                        app.Download(Spinner,root)
                    


<Downloaded@Screen>:
    name:'Downloaded'
    MDGridLayout:
        id:download_screen
        cols:1
        padding: ('20dp', '20dp', '20dp', '10dp')
        spacing:dp(10)
        # MDCard:
        #     size_hint_y:None
        #     height:dp(70)
        #     radius:dp(8)
        #     md_bg_color:app.theme_cls.bg_light
        #     line_color:app.theme_cls.primary_color
        #     line_width:dp(1.3)
        #     padding:dp(10)
        #     spacing:dp(5)

        #     MDCard:
        #         size_hint:None,None
        #         height:dp(50)
        #         width:dp(50)
        #         FitImage:
        #             source:'default_image.png'
        #             radius:dp(8)


        #     MDCard:
        #         size_hint:.8,1
        #         orientation: 'vertical'
        #         spacing: '5dp'
        #         MDCard:
        #             padding: ('10dp', '0dp', '0dp', '0dp')
        #             MDLabel:
        #                 text:'Name of file'
        #                 font_color:'Custome'
        #                 font_size:dp(12)
        #                 color:'white'
        #         MDCard:
        #             size_hint:1,None
        #             height:dp(6)
        #             padding:dp(10),dp(10)
        #             MDProgressBar:
        #                 id:download_progress
        #                 value:0.0
        #                 size_hint:1,None
        #                 height:dp(5)
        #                 pos_hint:{'center_y':.5}
                
        #         MDCard:
        #             padding: ('10dp', '0dp', '10dp', '0dp')
        #             MDLabel:
        #                 id:progress_percentage
        #                 text:'0.0%'
        #                 font_color:'Custom'
        #                 halign:'left'
        #                 color:'white'
        #                 font_size:dp(12)

                        

        #             MDLabel:
        #                 text:'100%'
        #                 font_color:'Custom'
        #                 color:'white'
        #                 font_size:dp(12)
        #                 halign:'right'

                
